<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cronograma de Estudos para Concurso CA-AA-AFN/2025 - CPA/CAP">
    <meta name="theme-color" content="#1e3a8a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Cronograma Marinha">
    
    <title>Cronograma CA-AA-AFN/2025</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow-x: hidden;
            user-select: none;
            -webkit-user-select: none;
        }
        #root {
            min-height: 100vh;
        }
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.5);
            border-radius: 4px;
        }
        @keyframes highlight {
            0%, 100% { box-shadow: 0 0 0 0 rgba(250, 204, 21, 0); }
            50% { box-shadow: 0 0 0 4px rgba(250, 204, 21, 0.5); }
        }
        .highlight-animation {
            animation: highlight 1s ease-in-out 2;
        }
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp {
            from { transform: translate(-50%, 100px); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" style="position: fixed; inset: 0; background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%); display: flex; align-items: center; justify-content: center; z-index: 9999;">
        <div style="text-align: center; color: white;">
            <div style="width: 60px; height: 60px; border: 4px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
            <h2 style="font-size: 24px; font-weight: bold; margin: 0;">Carregando Cronograma</h2>
            <p style="margin: 10px 0 0; opacity: 0.8;">Preparando seus estudos...</p>
        </div>
    </div>
    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>

    <!-- App Root -->
    <div id="root"></div>
    
    <!-- Install Prompt (serÃ¡ mostrado automaticamente) -->
    <div id="install-container"></div>

    <!-- Service Worker Registration -->
    <script>
        // Registrar Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('âœ… Service Worker registrado!', reg))
                    .catch(err => console.log('âŒ Erro ao registrar SW:', err));
            });
        }

        // PWA Install Prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Mostrar botÃ£o de instalaÃ§Ã£o personalizado
            const container = document.getElementById('install-container');
            container.innerHTML = `
                <div class="install-prompt bg-blue-600 text-white px-6 py-4 rounded-full shadow-2xl flex items-center gap-3">
                    <span class="text-lg">ðŸ“±</span>
                    <div class="flex-1">
                        <p class="font-bold text-sm">Instalar App</p>
                        <p class="text-xs opacity-90">Use offline como aplicativo</p>
                    </div>
                    <button onclick="installPWA()" class="bg-white text-blue-600 px-4 py-2 rounded-full font-bold text-sm hover:bg-blue-50">
                        Instalar
                    </button>
                    <button onclick="closeInstallPrompt()" class="text-white/70 hover:text-white">
                        âœ•
                    </button>
                </div>
            `;
        });

        window.installPWA = async () => {
            if (!deferredPrompt) return;
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            console.log(outcome === 'accepted' ? 'âœ… App instalado!' : 'âŒ InstalaÃ§Ã£o cancelada');
            deferredPrompt = null;
            document.getElementById('install-container').innerHTML = '';
        };

        window.closeInstallPrompt = () => {
            document.getElementById('install-container').innerHTML = '';
        };

        // Detectar quando o app foi instalado
        window.addEventListener('appinstalled', () => {
            console.log('ðŸŽ‰ PWA instalado com sucesso!');
            deferredPrompt = null;
        });

        // Remover loading screen apÃ³s carregamento
        window.addEventListener('load', () => {
            setTimeout(() => {
                const loading = document.getElementById('loading');
                if (loading) {
                    loading.style.opacity = '0';
                    loading.style.transition = 'opacity 0.3s';
                    setTimeout(() => loading.remove(), 300);
                }
            }, 1000);
        });
    </script>

    <!-- Main App Script -->
    <script type="text/babel" src="app.js"></script>
</body>
</html>
